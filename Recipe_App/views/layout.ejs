<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        

    <title>Recipe Book</title>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="../public/js/main.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/style.css" />
   <script src="/js/main.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-mod-offset-2 col-md-7">
          <button
            type="button"
            class="btn btn-primary btn-block col-mod-offset-2 col-md-7"
            data-toggle="modal"
            data-target="#formModal "
          >
            Add Recipe</button
          ><br /><br /><br />
          <% recipes.forEach(function(recipe) { %>
          <div class="well">
            <h4>
              <%= recipe.name %>
              <button
                class="btn btn-default pull-right"
                data-toggle="collapse"
                href="#recipe_<%= recipe.id %>"
                aria-expanded="false"
                aria-controls="#recipe_<%= recipe.id %>"
              >
                <span
                  class="glyphicon glyphicon-triangle-bottom"
                  aria-hidden="true"
                ></span>
              </button>
            </h4>

            <div class="collapse" id="recipe_<%= recipe.id %>">
              <br />
              <br />
              <p><strong>Ingridients:</strong><%= recipe.ingredients %></p>
              <p><strong>Directions:</strong><%= recipe.directions %></p>
              <br />
              <hr />

              <button class="btn btn-default edit-recipe"
              data-toggle="modal"
              data-target="#editFormModal"
              data-id="<%= recipe.id %>"
              data-name="<%= recipe.name %>"
              data-ingredients="<%= recipe.ingredients %>"
              data-directions="<%= recipe.directions %>"
            >
                <span class="glyphicon glyphicon-edit" aria-hidden="true">
                </span>
              </button>


              <button class="btn btn-danger delete-recipe" data-id="<%= recipe.id %>">
                <span class="glyphicon glyphicon-remove" aria-hidden="true">
                </span>
              </button>
            </div>
          </div>
          <% }); %>
        </div>
      </div>
    </div>

    <!--Add Form Modal-->
    <div
      class="modal fade"
      id="formModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="formModalLabel"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <form method="post" action="/add">
            <div class="modal-header">
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
              <h4 class="modal-title" id="myModalLabel">Add Recipe</h4>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label>Recipe Name</label>
                <input type="text" class="form-control" name="name" />
              </div>
              <div class="form-group">
                <label>Ingredients</label>
                <textarea class="form-control" name="ingredients"></textarea>
              </div>
              <div class="form-group">
                <label>Directions</label>
                <textarea class="form-control" name="directions"></textarea>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-default"
                data-dismiss="modal"
              >
                Close
              </button>
              <input type="submit" class="btn btn-primary" value="Save"/>
                
            </div>
          </form>
        </div>
      </div>
    </div>



        <!--edit Form Modal-->
        <div
        class="modal fade"
        id="editFormModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="editFormModalLabel"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <form method="post" action="/edit">
                <input type="hidden" id="edit-form-id" name="id"/>
              <div class="modal-header">
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Add Recipe</h4>
              </div>
              <div class="modal-body">
                <div class="form-group">
                  <label>Recipe Name</label>
                  <input type="text" class="form-control" name="name" id="edit-form-name" />
                </div>
                <div class="form-group">
                  <label>Ingredients</label>
                  <textarea class="form-control" name="ingredients" id="edit-form-ingredients"></textarea>
                </div>
                <div class="form-group">
                  <label>Directions</label>
                  <textarea class="form-control" name="directions" id="edit-form-directions"></textarea>
                </div>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-default"
                  data-dismiss="modal"
                >
                  Close
                </button>
                <input type="submit" class="btn btn-primary" value="Save"/>
                  
              </div>
            </form>
          </div>
        </div>
      </div>
     
  </body>
</html>
